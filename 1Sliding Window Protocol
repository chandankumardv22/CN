public class SlidingWindow {
    private final int win;
    private int base;
    private int next;

    public SlidingWindow(int win) {
        this.win = win;
        this.base = 0;
        this.next = 0;
    }

    public void send(char[] msg) {
        while (next < base + win && next < msg.length) {
            Frame f = makeFrame(msg[next]);
            sendFrame(f);
            next++;
        }
    }

    public void ack(int num, char[] msg) {
        base = num + 1;
        send(msg);
    }

    private Frame makeFrame(char ch) {
        return new Frame(next, ch);
    }

    private void sendFrame(Frame f) {
        System.out.println("Sending: " + f);
    }

    private void getAck(Frame f, char[] msg) {
        System.out.println("ACK for: " + f.num);
        ack(f.num, msg);
    }

    private static class Frame {
        private final int num;
        private final char ch;

        public Frame(int num, char ch) {
            this.num = num;
            this.ch = ch;
        }

        public String toString() {
            return "Frame{" + "num=" + num + ", ch=" + ch + '}';
        }
    }

    public static void main(String[] args) {
        char[] msg = {'A', 'B', 'C', 'D', 'E', 'F', 'G'};
        SlidingWindow sw = new SlidingWindow(4);
        sw.send(msg);
        for (int i = 0; i < msg.length; i++) {
            Frame f = new Frame(i, msg[i]);
            sw.getAck(f, msg);
        }
    }
}
